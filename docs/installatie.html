

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="nl" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="nl" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installatie &mdash; Mobiele CoderDojo Server  documentatie</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/coderdojo.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Zoeken" href="search.html" />
    <link rel="next" title="Over" href="over.html" />
    <link rel="prev" title="Hardware vereisten" href="hardware.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Mobiele CoderDojo Server
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Inhoud:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introductie.html">Introductie</a></li>
<li class="toctree-l1"><a class="reference internal" href="gebruiksscenarios.html">Gebruiksscenario’s</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">Software vereisten</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Hardware vereisten</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installatie</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basis">Basis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#wifi-delen">WIFI delen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installeren">Installeren</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verbinden">Verbinden</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dagelijks-gebruik">Dagelijks gebruik</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#firewall">Firewall</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#met-external-access-point">Met external access point</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#wordpress">WordPress</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plugins">Plugins</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="over.html">Over</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mobiele CoderDojo Server</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installatie</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installatie.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installatie">
<h1>Installatie<a class="headerlink" href="#installatie" title="Permalink naar deze titel">¶</a></h1>
<p>De installatie van de MCS is zoveel mogelijk geautomatiseerd. Dit maakt het makkelijk en reproduceerbaar.
Het script staat in onze <a class="reference external" href="https://github.com/coderdojonijmegen/MobieleCoderDojoServer">GitHub repository</a>.</p>
<div class="section" id="basis">
<h2>Basis<a class="headerlink" href="#basis" title="Permalink naar deze titel">¶</a></h2>
</div>
<div class="section" id="wifi-delen">
<h2>WIFI delen<a class="headerlink" href="#wifi-delen" title="Permalink naar deze titel">¶</a></h2>
<div class="section" id="installeren">
<h3>Installeren<a class="headerlink" href="#installeren" title="Permalink naar deze titel">¶</a></h3>
<p>Bibliotheken hebben meestal publiek WIFI. Een netwerk aansluiting is zeldzamer.
Om de Ninja’s zowel gebruik te kunnen laten maken van de MCS en het publieke internet,
moet de MCS verbonden worden met de publieke WIFI van de bibliotheek. Vervolgens moet deze internetverbinding
gedeeld worden met het access-point dat op de MCS draait.</p>
<p>Om dit eenvoudig te kunnen realiseren, kan <a class="reference external" href="https://github.com/oblique/create_ap">create_ap</a> gebruikt worden. Dit tooltje
configureert de WIFI adapter en de software routering om de client met het accesspoint te verbinden.
Om het tooltje te kunnen gebruiken, moet je de volgende stappen uitvoeren:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install git hostapd iproute2 iw haveged dnsmasq iptables procps bash util-linux build-essential network-manager
git clone https://github.com/oblique/create_ap
cd create_ap
sudo make install
</pre></div>
</div>
<p>Het tooltje is nu gereed voor gebruik.</p>
</div>
<div class="section" id="verbinden">
<h3>Verbinden<a class="headerlink" href="#verbinden" title="Permalink naar deze titel">¶</a></h3>
<p>Om de client te verbinden en het accesspoint op te zetten, moeten een aantal commando’s worden uitgevoerd. Hierbij is de volgorde van belang gebleken:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Accesspoint opzetten: <cite>sudo ./create_ap wlp0s20f3 wlp0s20f3 CoderDojoServer dojo2018</cite> (create_ap &lt;client&gt; &lt;ap&gt; &lt;ssid&gt; &lt;netwerk wachtwoord&gt;)</p></li>
<li><p>Beschikbare netwerken bekijken: <cite>nmcli device wifi</cite></p></li>
<li><p>Client verbinden: <cite>nmcli device wifi connect “&lt;ssid publieke wifi&gt;”</cite> indien er een WPA2 beveiliging gebruikt wordt, is het commando <cite>nmcli device wifi connect “&lt;ssid wpa2 wifi&gt;” password “&lt;wpa2 wachtwoord&gt;”</cite></p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="dagelijks-gebruik">
<h3>Dagelijks gebruik<a class="headerlink" href="#dagelijks-gebruik" title="Permalink naar deze titel">¶</a></h3>
<p>Met <cite>sudo make install</cite> wordt <cite>create_ap</cite> zo geïnstalleerd dat het als service kan draaien. Aangezien het accesspoint actief moet zijn voordat de client aan een (publiek) wifi netwerk wordt gekoppeld,
is het handig om de service aan te zetten. Met behulp van een configuratiebestand, kan de <cite>create_ap</cite> service worden ingesteld. Deze is na installatie hier te vinden: <cite>/etc/create_ap.conf</cite>.
We passen de inhoud aan zodat het er als volgt uit ziet:</p>
<div class="toggle docutils container">
<div class="header docutils container">
<p>klik om voorbeeld te tonen</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>## Standaard instellingen:
CHANNEL=default
GATEWAY=10.0.0.1
WPA_VERSION=2
ETC_HOSTS=0
DHCP_DNS=gateway
NO_DNS=0
NO_DNSMASQ=0
HIDDEN=0
MAC_FILTER=0
MAC_FILTER_ACCEPT=/etc/hostapd/hostapd.accept
ISOLATE_CLIENTS=0
SHARE_METHOD=nat
IEEE80211N=0
IEEE80211AC=0
HT_CAPAB=[HT40+]
VHT_CAPAB=
DRIVER=nl80211
NO_VIRT=0
FREQ_BAND=2.4
NEW_MACADDR=
DAEMONIZE=0
NO_HAVEGED=0
USE_PSK=0
## Aangepast voor onze CoderDojoServer:
COUNTRY=NL
WIFI_IFACE=wlp0s20f3
INTERNET_IFACE=wlp0s20f3
SSID=CoderDojoServer
PASSPHRASE=4Ninjas!
</pre></div>
</div>
</div>
<p>Na het aanpassen van de configuratie zet je de service aan: <cite>sudo systemctl enable create_ap</cite> en start je het <cite>sudo systemctl start create_ap</cite>. Met behulp van <cite>sudo systemctl status create_ap</cite> kun je zien of de service succesvol is opgestart.</p>
</div>
</div>
<div class="section" id="firewall">
<h2>Firewall<a class="headerlink" href="#firewall" title="Permalink naar deze titel">¶</a></h2>
<p>Omdat de MCS aan publieke netwerken hangt, gebruiken we een firewall om ongeauthorizeerd inkomend verkeer zoveel mogelijk te blokkeren.
De applicaties die we toelaten zijn:</p>
<blockquote>
<div><ul class="simple">
<li><p>SSH: management toegang voor systeemonderhoud en remote access; vanaf het externe bedrade netwerk en het interne wifi netwerk</p></li>
<li><p>HTTP: serveren van instructies, installers en ondersteunende services; alleen vanaf het interne wifi netwerk</p></li>
<li><p>DNS: om domeinnamen te vertalen in IP adressen. Onder andere om de server op <a class="reference external" href="http://coderdojoserver">http://coderdojoserver</a> te kunnen bereiken</p></li>
</ul>
</div></blockquote>
<p>Voor de eenvoud en omdat het access point alleen IPv4 ondersteund, blokkeren we alle IPv6 verkeer. We maken gebruik van de UFW firewall (Uncomplicated FireWall) met de volgende regels:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">To</span>                         <span class="n">Action</span>      <span class="n">From</span>
<span class="o">--</span>                         <span class="o">------</span>      <span class="o">----</span>
<span class="mi">22</span><span class="o">/</span><span class="n">tcp</span> <span class="n">on</span> <span class="n">eno1</span>             <span class="n">ALLOW</span> <span class="n">IN</span>    <span class="n">Anywhere</span> <span class="p">(</span><span class="n">extern</span><span class="p">,</span> <span class="n">bedrade</span> <span class="n">netwerk</span><span class="p">)</span>
<span class="mi">22</span><span class="o">/</span><span class="n">tcp</span> <span class="n">on</span> <span class="n">ap0</span>              <span class="n">ALLOW</span> <span class="n">IN</span>    <span class="n">Anywhere</span> <span class="p">(</span><span class="n">interne</span> <span class="n">netwerk</span> <span class="n">aan</span> <span class="n">accesspoint</span><span class="p">)</span>
<span class="mi">80</span><span class="o">/</span><span class="n">tcp</span> <span class="n">on</span> <span class="n">ap0</span>              <span class="n">ALLOW</span> <span class="n">IN</span>    <span class="n">Anywhere</span> <span class="p">(</span><span class="n">interne</span> <span class="n">netwerk</span> <span class="n">aan</span> <span class="n">accesspoint</span><span class="p">)</span>
<span class="mi">53</span><span class="o">/</span><span class="n">tcp</span> <span class="n">on</span> <span class="n">ap0</span>              <span class="n">ALLOW</span> <span class="n">IN</span>    <span class="n">Anywhere</span> <span class="p">(</span><span class="n">interne</span> <span class="n">netwerk</span> <span class="n">aan</span> <span class="n">accesspoint</span><span class="p">)</span>
</pre></div>
</div>
<p>In <cite>sudo nano /etc/default/ufw</cite> <cite>IPV6=yes</cite> vervangen door <cite>IPV6=no</cite>.</p>
<div class="section" id="met-external-access-point">
<h3>Met external access point<a class="headerlink" href="#met-external-access-point" title="Permalink naar deze titel">¶</a></h3>
<p><cite>/etc/netplan/mcs.yaml</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">network</span><span class="p">:</span>
  <span class="n">version</span><span class="p">:</span> <span class="mi">2</span>
  <span class="n">renderer</span><span class="p">:</span> <span class="n">networkd</span>
  <span class="n">wifis</span><span class="p">:</span>
    <span class="n">wlp0s20f3</span><span class="p">:</span>
      <span class="n">dhcp4</span><span class="p">:</span> <span class="n">yes</span>
      <span class="n">optional</span><span class="p">:</span> <span class="n">true</span>
      <span class="n">access</span><span class="o">-</span><span class="n">points</span><span class="p">:</span>
        <span class="s2">&quot;wifi netwerk SSID&quot;</span><span class="p">:</span>
          <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;wifi network wachtwoord&quot;</span>
  <span class="n">ethernets</span><span class="p">:</span>
    <span class="n">eno1</span><span class="p">:</span>
      <span class="n">addresses</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="o">/</span><span class="mi">24</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="wordpress">
<h2>WordPress<a class="headerlink" href="#wordpress" title="Permalink naar deze titel">¶</a></h2>
<div class="section" id="plugins">
<h3>Plugins<a class="headerlink" href="#plugins" title="Permalink naar deze titel">¶</a></h3>
<blockquote>
<div><ol class="arabic simple">
<li><p>Duplicate Post: (<a class="reference external" href="https://nl.wordpress.org/plugins/duplicate-post/">https://nl.wordpress.org/plugins/duplicate-post/</a>)
aangezien de structuur van onze berichtjes iedere keer zoveel mogelijk gelijk zijn, is het handig om gewoon een
vorig bericht te copiëren. Dat kan met deze plugin.</p></li>
<li><p>Tuxedo Big File Uploads (<a class="reference external" href="https://nl.wordpress.org/plugins/tuxedo-big-file-uploads/">https://nl.wordpress.org/plugins/tuxedo-big-file-uploads/</a>)
standaard is de upload grootte beperkt. Maar, omdat we soms grote installatie bestanden ter beschikking willen
stellen, is dit maximum vervelend. Met deze plugin kun je een ander maximum of onbeperkt maximum instellen.</p></li>
</ol>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="over.html" class="btn btn-neutral float-right" title="Over" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hardware.html" class="btn btn-neutral float-left" title="Hardware vereisten" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, CoderDojo Nijmegen

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    // https://stackoverflow.com/a/25543713/134731 for toggle example
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>